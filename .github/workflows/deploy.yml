name: deploy

on:
  workflow_run:
    workflows: [ "build" ]
    types:
      - completed

jobs:
  deploy-to-netlify:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.event == 'pull_request' && github.event.workflow_run.conclusion == 'success' }}
    steps:
      - uses: actions/checkout@v3
      - run: echo Workflow Run ${{ github.event.workflow_run.id }}
      # Need to figure out a workaround for this bit to reference the other output
      # - name: Retrieve build folder
      #   uses: actions/download-artifact@v3
      #   with:
      #     name: build
      #     path: build
      # - name: Deploy to Netlify
      #   uses: nwtgck/actions-netlify@b7c1504e00c6b8a249d1848cc1b522a4865eed99
      #   with:
      #     publish-dir: './build'
      #     netlify-config-path: ./netlify.toml
      #     production-branch: dev
      #     alias: deploy-preview-${{ github.event.number }}
      #     github-token: ${{ secrets.GITHUB_TOKEN }}
      #     deploy-message: 'Deploy from GitHub Actions'
      #     fails-without-credentials: true
      #     enable-commit-comment: false
      #   env:
      #     NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
      #     NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
