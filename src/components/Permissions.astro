---
/**
 * Usage:
 * <Permissions plugin="authenticator" />
 */

import type { MarkdownInstance } from 'astro';

interface Props {
	plugin: string;
}

const { plugin } = Astro.props;

async function importMDX(p: string): Promise<string> {
	/* @vite-ignore */
	// Apparently, this is working, but Vite is complaining https://github.com/rollup/plugins/tree/master/packages/dynamic-import-vars#limitations
	const dir = `../../packages/plugins-workspace/plugins/${p}/permissions/autogenerated/reference.md`;
	return import(dir).then((a: MarkdownInstance<String>) => {
		return a.compiledContent();
	});
}
const pageContent: string = await importMDX(plugin);
---

<Fragment set:html={pageContent} />
