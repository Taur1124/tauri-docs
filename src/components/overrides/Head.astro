---
import type { Props } from '@astrojs/starlight/props';
import Default from '@astrojs/starlight/components/Head.astro';

// TODO: Refactor to readability
let socialImage = new URL(
	`/social-images/content/docs${
		Astro.url.pathname == '/' ? '/index' : Astro.url.pathname.replace(/\/$/, '')
	}.png`,
	Astro.url
);

// TODO: Set default image for /blog and perhaps other key pages, currently there's a default TAURI image

// This is because /blog doesn't have a .md file, it's generated by the starlight-blog plugin
if (Astro.url.pathname === '/blog') {
	socialImage = new URL('/og.png', Astro.url);
}
---

<!-- /* TODO: - Check if is possible dynamic generate on astro.config head without overriding Head.astro
              - Make sure the URL pattern matches every page and if default fallback is working.
-->
<Default {...Astro.props} />
<meta name="twitter:image" content={socialImage} />
<meta property="og:image" content={socialImage} />
